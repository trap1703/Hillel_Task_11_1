#!/bin/env groovy

node {
    deleteDir()
    checkout scm

    files = sh(returnStdout: true, script: 'ls')
    p_files = files.split("\n").collect()[0,1]
    println (p_files)
    F_files = sh(returnStdout:true, script: "cat ${p_files[0]}")
    F_files = F_files.split("\n").collect()
    println (F_files)    
    XX_files = sh(returnStdout:true, script: "cat ${p_files[1]}")
    YY_files = XX_files.split("\n").collect()
    println (YY_files)
    properties([parameters([[$class: 'ChoiceParameter', choiceType: 'PT_SINGLE_SELECT', description: 'filename', filterLength: 1, filterable: false, name: 'files', randomName: 'choice-parameter-941595250365512', script: [$class: 'GroovyScript', fallbackScript: [classpath: [], sandbox: false, script: ''], script: [classpath: [], sandbox: false, script: sh(returnStdout:true, script: 'echo $p_files')]]], [$class: 'CascadeChoiceParameter', choiceType: 'PT_SINGLE_SELECT', description: '', filterLength: 1, filterable: false, name: 'value', randomName: 'choice-parameter-941595264446171', referencedParameters: 'files', script: [$class: 'GroovyScript', fallbackScript: [classpath: [], sandbox: false, script: ''], script: [classpath: [], sandbox: false, script: sh(returnStdout:true, script: 'cat /var/lib/jenkins/workspace/trap1703/res2.txt')]]]])])
    
}
